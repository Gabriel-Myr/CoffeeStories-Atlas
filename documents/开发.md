# 待办

## 优化方案建议

### 1. 世界地图优化 (优先级: 高)
- [ ] 点击放大功能
- [ ] 坐标具体到产区
    - [x] 坐标样式优化
    - [x] 点击坐标显示详情
        - [x] 显示产区名称
        - [x] 显示豆子名称
        - [x] 显示记录时间

### 2. 导航系统优化 (优先级: 高)
- [ ] 路由管理 - 考虑使用 react-router 替代手动栈式导航
- [ ] URL 同步 - 支持浏览器后退/前进按钮

### 3. 数据模型优化 (优先级: 中)
- [ ] 统一 CoffeeBean 和 RoasterBean 类型，避免重复定义
- [ ] 添加 TastingNote 到数据库同步
- [ ] 完善 Prisma schema 与 TypeScript 类型对应

### 4. 页面功能完善 (优先级: 中)
- [ ] 添加品鉴笔记页面 (TastingNotes.tsx)
- [ ] 添加搜索功能
- [ ] 首页添加筛选/排序功能

### 5. 代码质量优化 (优先级: 低)
- [ ] 提取公共组件 (如卡片、列表项等)
- [ ] 添加 loading 状态和骨架屏
- [ ] 错误处理和边界情况处理
- [ ] 添加 TypeScript strict 模式

### 6. UI/UX 优化 (优先级: 低)
- [ ] 图标统一 (使用 Lucide React)
- [ ] 移动端触摸交互优化
- [ ] 动画过渡效果完善

### 7. 性能优化 (优先级: 低)
- [ ] 图片懒加载
- [ ] 列表虚拟滚动 (长列表)
- [ ] 数据缓存策略

### 8. 待开发新功能 (优先级: 长期)
- [ ] 到店喝功能
- [ ] 用户社交功能
- [ ] 数据导出功能

---

## 技术方案

### 世界地图

- 方案 1: MapChart SVG（当前选用）
   - 工具: [mapchart.net](https://mapchart.net/)
   - 方式: 导出自定义世界地图为 SVG，替换现有抽象地图
   - 优点: 简单快速，可自定义样式

- 方案 2: react-simple-maps（备选）
   - 工具: `react-simple-maps` + `d3-scale`
   - 方式: 使用 GeoJSON 渲染可交互的世界地图
   - 优点: 支持缩放、点击等交互功能


https://icons8.com/



# 日志
## 2.15
### Home
- 大幅优化功能，确定产品垂类方向
- 确定地图元素，三等分导航式展示（待完善）
   - 地图去掉岛屿，只保留大陆外轮廓
   - 区分国家并描边
   - 增加已加标国家的名称在地图上
- 保留核心豆子数据库，上传即用
   - 需删除数据库审核功能
   - 是否连接icloud
- 到店喝功能排到后期开发

### icon
- 需优化：
   - 添加咖啡豆
   - 搜索栏
   - 底部导航栏
   - 地球
   - 地图上的标记

## 2.17
### 导航系统
- 改用栈式导航，支持返回上层页面
- 新增烘焙商列表、烘焙商管理页面

### 烘焙商模块
- 新增烘焙商列表页面
- 新增烘焙商管理页面
- 完善数据类型定义

### 首页优化
- 地图交互改为点击选中
- 标记改为咖啡豆图标

### 其他
- 清理废弃文档
- 代码精简

### 优化方案整理
- 整理待办事项清单
- 分为8大优化方向：地图、导航、数据模型、页面功能、代码质量、UI/UX、性能、新功能

## 2.20
### 世界地图重构
- 新增 WorldMap 组件（components/WorldMap.tsx）
- 使用 react-simple-maps 替代静态 SVG 地图
- 支持点击产区显示咖啡豆详情卡片
- 优化产区坐标，精确到产区级别

### 首页优化
- 重构 Home.tsx，使用Gemini 3.1
- 优化logo字体和排版

### 用户模块
- UserContext 新增 tastingNotes 状态管理
- Profile 页面支持分享冲煮记录到剪贴板/系统分享
- 新增品鉴笔记页面（TastingNotes.tsx）

### 设置模块
- 新增 Settings.tsx 设置总页面
- 新增 ThemeSettings.tsx 主题设置
- 新增 NotificationSettings.tsx 通知设置
- 新增 OtherSettings.tsx 其他设置

### 数据服务
- 新增 cloudDataService.ts 云端数据同步
- 新增 localStorageService.ts 本地存储服务
- 新增 aiService.ts AI 服务（Claude）
- 新增 claudeService.ts Claude API 封装

### 其他
- 新增 BottomNav 快捷导航
- 新增 Autocomplete 组件用于搜索自动补全
- 优化 constants.tsx 常量定义
- 清理废弃文档和代码